@page "/sync"
@using WSyncPro.Models.Filter
@using WSyncPro.Models.Jobs
<h3>Sync</h3>

<SyncJobList Jobs="@syncJobs" />

<SyncJobCreate Job="@newJob" OnJobSubmitted="HandleJobSubmitted" OnCancelled="HandleCancel" />

@code {
    private SyncJob newJob = new SyncJob
        {
            FilterParams = new FilterParams { Include = new List<string>(), Exclude = new List<string>() }
        };

    private void HandleJobSubmitted(SyncJob job)
    {
        // Add the new job to the existing list
        syncJobs.Add(job);

        // Reset the newJob object for the next creation
        newJob = new SyncJob
            {
                FilterParams = new FilterParams { Include = new List<string>(), Exclude = new List<string>() }
            };

        Console.WriteLine($"Job Submitted: {job.Name}");
    }

    private void HandleCancel()
    {
        // Logic to handle cancellation
        Console.WriteLine("Job creation canceled.");
    }

    private List<SyncJob> syncJobs = new List<SyncJob>
    {
        new SyncJob
        {
            Name = "Job 1",
            SrcDirectory = "/source/dir1",
            DstDirectory = "/dest/dir1",
            KeepDirectories = true,
            RunCount = 3,
            Status = JobStatus.Idle,
            FilterParams = new FilterParams
            {
                Include = new List<string> { "*.txt", "*.jpg" },
                Exclude = new List<string> { "*.tmp" }
            },
            Created = DateTime.Now.AddDays(-5),
            Updated = DateTime.Now
        },
        new SyncJob
        {
            Name = "Job 2",
            SrcDirectory = "/source/dir2",
            DstDirectory = "/dest/dir2",
            KeepDirectories = false,
            RunCount = 1,
            Status = JobStatus.Running,
            FilterParams = new FilterParams
            {
                Include = new List<string> { "*.png" },
                Exclude = new List<string> { "*.bak" }
            },
            Created = DateTime.Now.AddDays(-2),
            Updated = DateTime.Now
        },
    new SyncJob
    {
        Name = "Job 3",
        SrcDirectory = "/source/dir3",
        DstDirectory = "/dest/dir3",
        KeepDirectories = true,
        RunCount = 0,
        Status = JobStatus.New,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.docx", "*.xlsx" },
            Exclude = new List<string> { "*.log" }
        },
        Created = DateTime.Now.AddDays(-10),
        Updated = DateTime.Now.AddDays(-8)
    },
    new SyncJob
    {
        Name = "Job 4",
        SrcDirectory = "/source/dir4",
        DstDirectory = "/dest/dir4",
        KeepDirectories = false,
        RunCount = 5,
        Status = JobStatus.Successful,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.pdf", "*.pptx" },
            Exclude = new List<string> { "*.tmp" }
        },
        Created = DateTime.Now.AddDays(-15),
        Updated = DateTime.Now.AddDays(-5)
    },
    new SyncJob
    {
        Name = "Job 5",
        SrcDirectory = "/source/dir5",
        DstDirectory = "/dest/dir5",
        KeepDirectories = true,
        RunCount = 2,
        Status = JobStatus.Failed,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.jpg", "*.png" },
            Exclude = new List<string> { "*.bak", "*.tmp" }
        },
        Created = DateTime.Now.AddDays(-20),
        Updated = DateTime.Now.AddDays(-15)
    },
    new SyncJob
    {
        Name = "Job 6",
        SrcDirectory = "/source/dir6",
        DstDirectory = "/dest/dir6",
        KeepDirectories = false,
        RunCount = 4,
        Status = JobStatus.Running,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.html", "*.css" },
            Exclude = new List<string> { "*.tmp", "*.bak" }
        },
        Created = DateTime.Now.AddDays(-7),
        Updated = DateTime.Now
    },
    new SyncJob
    {
        Name = "Job 7",
        SrcDirectory = "/source/dir7",
        DstDirectory = "/dest/dir7",
        KeepDirectories = true,
        RunCount = 6,
        Status = JobStatus.Idle,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.zip", "*.rar" },
            Exclude = new List<string> { "*.log", "*.tmp" }
        },
        Created = DateTime.Now.AddDays(-12),
        Updated = DateTime.Now.AddDays(-3)
    },
    new SyncJob
    {
        Name = "Job 8",
        SrcDirectory = "/source/dir8",
        DstDirectory = "/dest/dir8",
        KeepDirectories = false,
        RunCount = 0,
        Status = JobStatus.New,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.mp3", "*.wav" },
            Exclude = new List<string> { "*.tmp", "*.bak" }
        },
        Created = DateTime.Now.AddDays(-1),
        Updated = DateTime.Now
    },
    new SyncJob
    {
        Name = "Job 9",
        SrcDirectory = "/source/dir9",
        DstDirectory = "/dest/dir9",
        KeepDirectories = true,
        RunCount = 1,
        Status = JobStatus.Crashed,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.avi", "*.mp4" },
            Exclude = new List<string> { "*.log", "*.bak" }
        },
        Created = DateTime.Now.AddDays(-25),
        Updated = DateTime.Now.AddDays(-20)
    },
    new SyncJob
    {
        Name = "Job 10",
        SrcDirectory = "/source/dir10",
        DstDirectory = "/dest/dir10",
        KeepDirectories = false,
        RunCount = 8,
        Status = JobStatus.Successful,
        FilterParams = new FilterParams
        {
            Include = new List<string> { "*.exe", "*.dll" },
            Exclude = new List<string> { "*.tmp", "*.log" }
        },
        Created = DateTime.Now.AddDays(-30),
        Updated = DateTime.Now.AddDays(-10)
    }
    };
}
