@page "/"
@using WSyncPro.Models.Files

<h1>Hello, world!</h1>

Welcome to your new app.

<MudText Typo="Typo.h6">MudBlazor is @Text</MudText>
<MudButton Variant="Variant.Filled" Color="Color.Primary" OnClick="ButtonOnClick">@ButtonText</MudButton>

@inject ISnackbar Snackbar

<MudButton Variant="Variant.Filled" Color="Color.Primary" @onclick="@(() => Snackbar.Add("Simple Snackbar"))">
    Open Snackbar
</MudButton>

<!-- Component Tests Examples -->
<Wetflix.App.Components.Pages.DManagement.DirectoryListDisplayComponent Directory="@wDirectory" />

@code {
    public string Text { get; set; } = "????";
    public string ButtonText { get; set; } = "Click Me";
    public int ButtonClicked { get; set; }

    private WDirectory wDirectory;

    void ButtonOnClick()
    {
        ButtonClicked += 1;
        Text = $"Awesome x {ButtonClicked}";
        ButtonText = "Click Me Again";
    }

    private void BuildTestDirectory()
    {
        wDirectory = new WDirectory
            {
                Id = Guid.NewGuid(),
                Name = "RootDirectory",
                Path = "/",
                Items = new List<WBaseItem>
            {
                new WDirectory
                {
                    Id = Guid.NewGuid(),
                    Name = "SubDirectory1",
                    Path = "/SubDirectory1",
                    Items = new List<WBaseItem>
                    {
                        new WFile
                        {
                            Id = Guid.NewGuid(),
                            Name = "File1.txt",
                            Path = "/SubDirectory1/File1.txt",
                            FileExtension = ".txt",
                            FileSize = 1234
                        },
                        new WFile
                        {
                            Id = Guid.NewGuid(),
                            Name = "File2.log",
                            Path = "/SubDirectory1/File2.log",
                            FileExtension = ".log",
                            FileSize = 5678
                        },
                        new WDirectory
                        {
                            Id = Guid.NewGuid(),
                            Name = "SubDirectory2",
                            Path = "/SubDirectory1/SubDirectory2",
                            Items = new List<WBaseItem>
                            {
                                new WFile
                                {
                                    Id = Guid.NewGuid(),
                                    Name = "File4.log",
                                    Path = "/SubDirectory1/SubDirectory2/File2.log",
                                    FileExtension = ".log",
                                    FileSize = 999
                                }
                            }
                        }
                    }
                },
                new WFile
                {
                    Id = Guid.NewGuid(),
                    Name = "RootFile1.md",
                    Path = "/RootFile1.md",
                    FileExtension = ".md",
                    FileSize = 2345
                }
            }
            };
    }

    protected override void OnInitialized()
    {
        BuildTestDirectory();
    }
}
