@using WSyncPro.Models.Files
@using MudBlazor

<MudPaper Height="100%" Width="100%">
    <MudContainer MaxWidth="MaxWidth.ExtraLarge" Style="overflow-y: auto; height: 100%;min-height 100px;">
        <Wetflix.App.Components.Pages.DManagement.DirectoryDisplayComponent Directory="@Directory" OnFileSelected="HandleFileSelected" />
    </MudContainer>

    @if (drawerOpen)
    {
        <MudCard Style="position: absolute; top: 0; right: 0; height: 100%; width: 300px;">
            <MudCardContent>
                <MudText Typo="Typo.h5">File Details</MudText>
                @if (SelectedFile != null)
                {
                    <MudText Typo="Typo.body1">Name: @SelectedFile.Name</MudText>
                    <MudText Typo="Typo.body1">Extension: @SelectedFile.FileExtension</MudText>
                    <MudText Typo="Typo.body1">Size: @SelectedFile.FileSize bytes</MudText>
                    <MudText Typo="Typo.body1">Path: @SelectedFile.Path</MudText>
                }
                else
                {
                    <MudText Typo="Typo.body1">No file selected.</MudText>
                }
            </MudCardContent>
            <MudCardActions>
                <MudButton Variant="Variant.Text" Color="Color.Primary" @onclick="() => drawerOpen = false">Close</MudButton>
            </MudCardActions>
        </MudCard>
    }
</MudPaper>

@code {
    [Parameter] public WDirectory Directory { get; set; } = new WDirectory();

    private WFile SelectedFile;
    private bool drawerOpen = false;

    private void HandleFileSelected(WFile file)
    {
        if (SelectedFile == file)
        {
            drawerOpen = !drawerOpen;
        }
        else
        {
            SelectedFile = file;
            drawerOpen = true;
        }
    }
}